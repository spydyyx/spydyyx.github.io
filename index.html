<script>
/* MENU */
function toggleMenu(){
  document.getElementById("navLinks").classList.toggle("show");
}

/* HEADER GLOW */
window.addEventListener("scroll",()=>{
  document.querySelector("header")
    .classList.toggle("glow",window.scrollY>50);
});

/* CARD SCROLL */
const cards=document.querySelectorAll(".card");
const heroContent=document.querySelector(".hero-content");
const sections=document.querySelectorAll(".section h2, .section p");

function animateOnScroll(){
  const trigger=innerHeight*0.85;

  // Cards
  cards.forEach(c=>{
    if(c.getBoundingClientRect().top<trigger) c.classList.add("show");
    else c.classList.remove("show");
  });

  // Hero content
  if(heroContent.getBoundingClientRect().top<trigger) heroContent.classList.add("show");
  else heroContent.classList.remove("show");

  // Section headings & paragraphs
  sections.forEach(s=>{
    if(s.getBoundingClientRect().top<trigger) s.classList.add("show");
    else s.classList.remove("show");
  });
}

window.addEventListener("scroll",animateOnScroll);
window.addEventListener("load",animateOnScroll);

/* TYPING */
const text="Jetin Raj";
let i=0;
const typing=document.getElementById("typing");
(function type(){
  if(i<text.length){
    typing.innerHTML+=text.charAt(i++);
    setTimeout(type,120);
  }
})();

/* ===== MATRIX ANIMATION ===== */
const canvas=document.getElementById("matrix");
const ctx=canvas.getContext("2d");

function resize(){
  canvas.width=innerWidth;
  canvas.height=innerHeight;
}
resize();
addEventListener("resize",resize);

const chars="01";
const fontSize=16;
let columns;
let drops;

function initMatrix(){
  columns=Math.floor(canvas.width/fontSize);
  drops=Array(columns).fill(1);
}
initMatrix();

let speed=1;

function drawMatrix(){
  ctx.fillStyle="rgba(0,0,0,0.15)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  ctx.fillStyle="#00ffff";
  ctx.font=fontSize+"px monospace";

  for(let i=0;i<drops.length;i++){
    const text=chars[Math.floor(Math.random()*chars.length)];
    ctx.fillText(text,i*fontSize,drops[i]*fontSize);

    if(drops[i]*fontSize>canvas.height&&Math.random()>0.975)
      drops[i]=0;
    drops[i]+=speed;
  }
}

function animate(){
  drawMatrix();
  requestAnimationFrame(animate);
}
animate();

/* SCROLL REACTION */
addEventListener("scroll",()=>{
  speed=1+(scrollY/800);
});
</script>

<style>
/* Make hero content and sections scroll-animated */
.hero-content, .section h2, .section p {
  opacity: 0;
  transform: translateY(50px);
  transition: all 0.8s ease-out;
}
.hero-content.show, .section h2.show, .section p.show {
  opacity: 1;
  transform: translateY(0);
}

/* Ensure cards animate on scroll */
.card {
  transform: translateY(70px);
  opacity: 0;
  transition: all 0.6s ease;
}
.card.show {
  transform: translateY(0);
  opacity:1;
}
</style>
